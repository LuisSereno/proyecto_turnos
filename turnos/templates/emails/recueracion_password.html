{% extends 'emails/base_email.html' %}

{% block content %}
<h2>Solicitud de Recuperación de Contraseña 🔐</h2>

<p>Hola <strong>{{ usuario.first_name }}</strong>,</p>

<p>Recibimos una solicitud para restablecer la contraseña de tu cuenta en <strong>Planificador de Turnos</strong>.</p>

<p>Si fuiste tú quien hizo esta solicitud, haz clic en el botón de abajo para crear una nueva contraseña segura:</p>

<div class="button-container">
    <a href="{{ url_reset }}" class="button">🔑 Restablecer mi Contraseña</a>
</div>

<div class="info-box">
    <strong>🔗 ¿El botón no funciona?</strong>
    <p style="margin-top: 8px;">Copia y pega este enlace en tu navegador:</p>
    <div class="code-block">{{ url_reset }}</div>
</div>

<div class="warning-box">
    <strong>⏰ Este enlace es temporal y expirará pronto</strong>
    <p style="margin-top: 8px;">
        Por razones de seguridad, este enlace de recuperación expirará en <strong>{{ timeout_minutos }} minutos</strong>.<br>
        Si no lo usas en ese tiempo, deberás solicitar un nuevo enlace.
    </p>
</div>

<div class="divider"></div>

<div class="info-box">
    <strong>🔒 Información de Seguridad</strong>
    <table style="width: 100%; margin-top: 12px; font-size: 14px;">
        <tr>
            <td style="padding: 4px 0;"><strong>Dirección IP:</strong></td>
            <td style="padding: 4px 0;"><code>{{ ip_address }}</code></td>
        </tr>
        <tr>
            <td style="padding: 4px 0;"><strong>Fecha y hora:</strong></td>
            <td style="padding: 4px 0;">{{ fecha_solicitud|default:"Ahora" }}</td>
        </tr>
        <tr>
            <td style="padding: 4px 0;"><strong>Cuenta:</strong></td>
            <td style="padding: 4px 0;">{{ usuario.email }}</td>
        </tr>
    </table>
</div>

<div class="danger-box">
    <strong>⚠️ ¿No solicitaste restablecer tu contraseña?</strong>
    <p style="margin-top: 8px;">
        Si no realizaste esta solicitud, <strong>ignora este email</strong>. Tu contraseña permanecerá sin cambios y tu cuenta está segura.<br><br>
        Sin embargo, si sospechas que alguien está intentando acceder a tu cuenta, te recomendamos:
    </p>
    <ul style="margin: 12px 0 0 20px; padding: 0;">
        <li>Cambiar tu contraseña inmediatamente</li>
        <li>Activar la autenticación de dos factores</li>
        <li>Revisar la actividad reciente de tu cuenta</li>
        <li>Contactar a nuestro equipo de soporte</li>
    </ul>
</div>

<div class="divider"></div>

<h3 style="color: #667eea; font-size: 18px;">💡 Consejos para una Contraseña Segura:</h3>

<ul>
    <li>Usa al menos 12 caracteres</li>
    <li>Combina mayúsculas, minúsculas, números y símbolos</li>
    <li>Evita información personal (nombres, fechas de nacimiento)</li>
    <li>No reutilices contraseñas de otros sitios</li>
    <li>Considera usar un gestor de contraseñas</li>
</ul>

<div class="button-container">
    <a href="{{ site_url }}/ayuda/seguridad/" class="button button-secondary">📚 Más sobre Seguridad</a>
</div>

<p style="margin-top: 30px;">
    Mantén tu cuenta segura,<br>
    <strong>El equipo de Planificador de Turnos</strong> 🛡️
</p>
{% endblock %}
